---
title: 用咒语绘图
categories: [note]
comments: true
---

# 用咒语绘图

## 内容大纲

1. 标题意义
2. 为什么做这件事
3. 正文
4. 结尾
5. 完整代码

这篇博客的全部内容一共分为5个部分，内容如下：

1. 第1部分：用这个标题的意义
2. 第2部分：做这件事的原因
3. 第3部分：简单讲解整个代码
4. 第4部分：做一个小结
5. 第5部分：贴出完整的代码

## 1. 标题用意

我的感觉是这个标题很新奇，“咒语”和“绘图”是怎么联系起来的？这是种夸张和比喻的说法，有标题党的嫌疑。

这里先说一下“绘图”的含义，“绘图”是指把数据在图上展示出来，而不是用表格记录下数据。“咒语”是指代码，“用咒语”就是指写代码了。

用代码绘图，我觉得这算是一种解决问题的特殊方法，关于绘图这里要提一下office办公软件Excel。这是一件利器，用好它之后可以做出很多意想不到的事，绘图只是它的基本功能。只怪自己学艺不精，书到用时方恨少，实在是玩不好Excel。

如果把绘图比作是祈求老天爷下雨，那么使用Excel就是用跳舞来求雨，写代码就是用念咒语的方式来求雨，这应该算是一个比较恰当的比喻。

下面说一下做这件事的原因。

## 2. 为什么做这件事

首先是因为有这方面的需要，比如说做完一个实验后需要整理数据并绘图展示，再比如说把一组数据用图的形式展示出来要比枯燥的文字更有说服力。所谓一图胜千言，这样还少去了一些没有必要的叨叨，直接看图说话。

再有一点是，绘图就像画画一样好玩，只不过我是用的代码来画画，这个过程是令人高兴的。把脑子里的想法用代码写在电脑上，然后运行代码得到成果，这能让人感到满满的成就感。因为这个成果是由我亲手所创造的，虽然我不能用手触碰到它，但它就在那里真实的存在着。

我平时常用到图形就只有两种，散点图和曲线图，主要是为了整理实验数据。所以记录一下怎样绘制散点图和曲线图，为了方面以后翻小抄。因为我的记性真的是大不如前了，有时候会忘记一些代码的写法，大概是未老先衰了吧（此处应有一个哭笑不得的emoji表情，找到的emoji表情笑的实在是太欢了，放在这里不合适）。

## 3. 正文

下面开始这篇博客的重点，怎样用咒语绘图，最终成果请见下图：

![](2022-11-10/img-01.jpg)

<img src="{{ '/assets/2022-11-10/img-01.jpg' | relative_url }}">

导入相关库，可以理解是念咒语前要准备的法器，就像和尚念经前得准备木鱼和手串一样。

```python
# 导入相关库
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt


```


```python
# 设置中文字体
mpl.rcParams['font.sans-serif'] = ['FangSong']
mpl.rcParams['axes.unicode_minus'] = False

# 设置公式字体
mpl.rcParams['mathtext.fontset'] = 'cm'

```

这里的数据我是根据真实的实验结果自己改编的。（这里自夸一下，真实的实验数据漂亮的像假数据，而这里的假数据却更贴近真实实验数据）

下面的回归方程是用Excel算出来的，自己写代码算反而麻烦，君子生非异也，善假于物也。


```python
# 相关数据
x = [100, 200, 300, 400, 500]
y = [55, 60, 76, 82, 105]

# 回归方程
x1 = np.arange(0, 501, 10)
y1 = 0.122*x1 + 39

```

先把图绘制出来，然后再做标注，设置横纵坐标轴，最后把图片以PDF的形式保存下来。

```python
# 创建相关对象
fig, ax = plt.subplots(dpi=120, figsize=(5, 2.7), layout='constrained')

# 绘制曲线和散点图
ax.scatter(x, y, color='k')
ax.plot(x1, y1, color='k')

# 设置坐标轴显示范围
ax.set_xlim(0, 600)
ax.set_ylim(0, 120)

# 绘制网格
ax.grid(True, color='k', lw=1)

# 相关标注
ax.set_xlabel('单位:（$KPa$）')
ax.set_ylabel('单位:（$KPa$）')

# 设置标题
ax.set_title('实验数据绘图')

# 保存图片
fig.savefig('img-01.pdf')

```

我觉得代码里的注释应该是很清晰了，所以这里就不再需要过多解释了。

## 4. 结尾

不论是“跳舞”还是“念咒语”只要能优雅的解决问题就算是好方法，找最合适自己的，没必要在意用什么工具。

Excel应该也可以用咒语来绘图的，透露一点风声，因为我最近就在学跟这方面的知识（VBA）不确定自己什么时候能学会或者能不能坚持下去。但我有一个梦想，就是以后可以在Excel里也用代码绘图。

因为我是半路出家的和尚自己学着念“咒语”的，所以有些地方可能会有错误，如果因为我的错误而影响了别人那真是罪过大了啊😱。

## 5. 完整代码

我会在这里贴出完整的代码，以及我写代码的工具和运行代码的环境，希望可以帮到需要复现我代码的人，虽然这个代码并不值得复现。

整个代码应该还算简单明了，虽然有些参数还需要手动调试才能达到想要的效果。所以我想等我有时间之后，把整个代码再升级调整一下，希望到时候只需要输入实验数据就能得到我想要的结果。

一些相关的环境：

1. Python 3.9.6
2. matplotlib version: 3.6.2
3. vscode Jupyter

完整的代码：

```python
# 导入相关库
import numpy as np
import matplotlib as mpl
import matplotlib.pyplot as plt


# 设置中文字体
mpl.rcParams['font.sans-serif'] = ['FangSong']
mpl.rcParams['axes.unicode_minus'] = False

# 设置公式字体
mpl.rcParams['mathtext.fontset'] = 'cm'

# 相关数据
x = [100, 200, 300, 400, 500]
y = [55, 60, 76, 82, 105]

# 回归方程
x1 = np.arange(0, 501, 10)
y1 = 0.122*x1 + 39

# 创建相关对象
fig, ax = plt.subplots(dpi=200, figsize=(5, 2.7), layout='constrained')

# 绘制曲线和散点图
ax.scatter(x, y, color='k')
ax.plot(x1, y1, color='k')

# 设置坐标轴显示范围
ax.set_xlim(0, 600)
ax.set_ylim(0, 120)

# 绘制网格
ax.grid(True, color='k', lw=1)

# 相关标注
ax.set_xlabel('单位:（$KPa$）')
ax.set_ylabel('单位:（$KPa$）')

# 设置标题
ax.set_title('实验数据绘图')

# 保存图片
fig.savefig('img-01.pdf')

```